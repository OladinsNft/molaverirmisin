"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8997],{6215:function(e,t,s){s.d(t,{W:function(){return a}});var i=s(42009),n=s(6475),r=s(54146);class a extends r.Z{constructor(e){let{chains:t=n.gL9,options:s}=e;super(),(0,i._)(this,"id",void 0),(0,i._)(this,"name",void 0),(0,i._)(this,"chains",void 0),(0,i._)(this,"options",void 0),(0,i._)(this,"ready",void 0),this.chains=t,this.options=s}getBlockExplorerUrls(e){let t=e.explorers?.map(e=>e.url)??[];return t.length>0?t:void 0}isChainUnsupported(e){return!this.chains.some(t=>t.chainId===e)}updateChains(e){this.chains=e}}},91477:function(e,t,s){s.d(t,{A:function(){return a},C:function(){return h},R:function(){return c},S:function(){return d},U:function(){return u},a:function(){return o}});var i=s(42009);class n extends Error{constructor(e,t){let{cause:s,code:n,data:r}=t;if(!Number.isInteger(n))throw Error('"code" must be an integer.');if(!e||"string"!=typeof e)throw Error('"message" must be a nonempty string.');super(`${e}. Cause: ${s}`),(0,i._)(this,"cause",void 0),(0,i._)(this,"code",void 0),(0,i._)(this,"data",void 0),this.cause=s,this.code=n,this.data=r}}class r extends n{constructor(e,t){let{cause:s,code:i,data:n}=t;if(!(Number.isInteger(i)&&i>=1e3&&i<=4999))throw Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,{cause:s,code:i,data:n})}}class a extends Error{constructor(){super(...arguments),(0,i._)(this,"name","AddChainError"),(0,i._)(this,"message","Error adding chain")}}class h extends Error{constructor(e){let{chainId:t,connectorId:s}=e;super(`Chain "${t}" not configured for connector "${s}".`),(0,i._)(this,"name","ChainNotConfigured")}}class o extends Error{constructor(){super(...arguments),(0,i._)(this,"name","ConnectorNotFoundError"),(0,i._)(this,"message","Connector not found")}}class c extends n{constructor(e){super("Resource unavailable",{cause:e,code:-32002}),(0,i._)(this,"name","ResourceUnavailable")}}class d extends r{constructor(e){super("Error switching chain",{cause:e,code:4902}),(0,i._)(this,"name","SwitchChainError")}}class u extends r{constructor(e){super("User rejected request",{cause:e,code:4001}),(0,i._)(this,"name","UserRejectedRequestError")}}},4646:function(e,t,s){s.d(t,{n:function(){return i}});function i(e){return"string"==typeof e?Number.parseInt(e,"0x"===e.trim().substring(0,2)?16:10):"bigint"==typeof e?Number(e):e}},38997:function(e,t,s){s.r(t),s.d(t,{WalletConnectV1Connector:function(){return _}});var i=s(71958),n=s(16074),r=s(42009),a=s(61460),h=s(19485),o=s(241),c=s(16441),d=s(6215),u=s(4646),l=s(91477);s(54146);let m="last-used-chain-id",g="last-session";var p=new WeakMap,w=new WeakMap,C=new WeakSet,v=new WeakSet;class _ extends d.W{constructor(e){super(e),(0,i._)(this,v),(0,i._)(this,C),(0,r._)(this,"id",a.w.walletConnectV1),(0,r._)(this,"name","WalletConnectV1"),(0,r._)(this,"ready",!0),(0,n._)(this,p,{writable:!0,value:void 0}),(0,n._)(this,w,{writable:!0,value:void 0}),(0,r._)(this,"walletName",void 0),(0,r._)(this,"onSwitchChain",()=>{this.emit("message",{type:"switch_chain"})}),(0,r._)(this,"onDisplayUri",async(e,t)=>{e&&this.emit("message",{data:e,type:"display_uri_error"}),this.emit("message",{data:t.params[0],type:"display_uri"})}),(0,r._)(this,"onRequestSent",(e,t)=>{e&&this.emit("message",{data:e,type:"request"}),this.emit("message",{data:t.params[0],type:"request"})}),(0,r._)(this,"onMessage",e=>{this.emit("message",e)}),(0,r._)(this,"onAccountsChanged",e=>{0===e.length?this.emit("disconnect"):this.emit("change",{account:h.getAddress(e[0])})}),(0,r._)(this,"onChainChanged",e=>{let t=(0,u.n)(e),s=this.isChainUnsupported(t);(0,n.b)(this,w).setItem(m,String(e)),this.emit("change",{chain:{id:t,unsupported:s}})}),(0,r._)(this,"onDisconnect",async()=>{this.walletName=void 0,(0,n.b)(this,w).removeItem(m),(0,n.b)(this,w).removeItem(g),(0,i.a)(this,v,f).call(this),this.emit("disconnect")}),(0,n.a)(this,w,e.storage)}async connect(){let{chainId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t=e;if(!t){let s=await (0,n.b)(this,w).getItem(m),r=s?parseInt(s):void 0;r&&!this.isChainUnsupported(r)&&(t=r)}let a=await this.getProvider({chainId:t,create:!0});this.setupListeners(),setTimeout(()=>this.emit("message",{type:"connecting"}),0);let c=await a.enable(),d=h.getAddress(c[0]),u=await this.getChainId(),g=this.isChainUnsupported(u);if(this.walletName=a.connector?.peerMeta?.name??"",e)try{await this.switchChain(e),u=e,g=this.isChainUnsupported(u)}catch(p){console.error(`could not switch to desired chain id: ${e} `,p)}return(0,i.a)(this,C,b).call(this),this.emit("connect",{account:d,chain:{id:u,unsupported:g},provider:a}),{account:d,chain:{id:u,unsupported:g},provider:new o.Q(a)}}catch(v){if(/user closed modal/i.test(v.message))throw new l.U(v);throw v}}async disconnect(){let e=await this.getProvider();await e.disconnect()}async getAccount(){let e=await this.getProvider(),t=e.accounts;return h.getAddress(t[0])}async getChainId(){let e=await this.getProvider(),t=(0,u.n)(e.chainId);return t}async getProvider(){let{chainId:e,create:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(0,n.b)(this,p)||e||t){let i=this.options?.infuraId?{}:this.chains.reduce((e,t)=>({...e,[t.chainId]:t.rpc[0]}),{}),r=(await Promise.all([s.e(2592),s.e(58)]).then(s.bind(s,70058))).default,a=await (0,n.b)(this,w).getItem(g),h=a?JSON.parse(a):void 0;this.walletName=h?.peerMeta?.name||void 0,(0,n.a)(this,p,new r({...this.options,chainId:e,rpc:{...i,...this.options?.rpc},session:h||void 0}))}return(0,n.b)(this,p)}async getSigner(){let{chainId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,s]=await Promise.all([this.getProvider({chainId:e}),this.getAccount()]);return new o.Q(t,e).getSigner(s)}async isAuthorized(){try{let e=await this.getAccount();return!!e}catch{return!1}}async switchChain(e){let t=await this.getProvider(),s=c.hexValue(e);try{return await Promise.race([t.request({method:"wallet_switchEthereumChain",params:[{chainId:s}]}),new Promise(t=>this.on("change",s=>{let{chain:i}=s;i?.id===e&&t(e)}))]),this.chains.find(t=>t.chainId===e)??{chainId:e,name:`Chain ${s}`,network:`${s}`,nativeCurrency:{name:"Ether",decimals:18,symbol:"ETH"},rpc:[""],shortName:"eth",chain:"ETH",slug:"ethereum",testnet:!1}}catch(a){let i="string"==typeof a?a:a?.message;if(/user rejected request/i.test(i))throw new l.U(a);let n=this.chains.find(t=>t.chainId===e);if(!n)throw new l.S(`Chain ${e} is not added in the list of supported chains`);if(/Unrecognized chain ID/i.test(i)){this.emit("message",{type:"add_chain"});let r=this.getBlockExplorerUrls(n);return await t.request({method:"wallet_addEthereumChain",params:[{chainId:s,chainName:n.name,nativeCurrency:n.nativeCurrency,rpcUrls:n.rpc,blockExplorerUrls:r}]}),n}throw new l.S(a)}}async setupListeners(){(0,n.b)(this,p)&&((0,n.b)(this,p).on("accountsChanged",this.onAccountsChanged),(0,n.b)(this,p).on("chainChanged",this.onChainChanged),(0,n.b)(this,p).on("disconnect",this.onDisconnect),(0,n.b)(this,p).on("message",this.onMessage),(0,n.b)(this,p).on("switchChain",this.onSwitchChain),(0,n.b)(this,p).on("display_uri",this.onDisplayUri),(0,n.b)(this,p).on("call_request_sent",this.onRequestSent))}}async function b(){let e=n.b(this,p)?.connector.session;this.walletName=e?.peerMeta?.name||"";let t=JSON.stringify(e);(0,n.b)(this,w).setItem(g,t)}function f(){(0,n.b)(this,p)&&((0,n.b)(this,p).removeListener("accountsChanged",this.onAccountsChanged),(0,n.b)(this,p).removeListener("chainChanged",this.onChainChanged),(0,n.b)(this,p).removeListener("disconnect",this.onDisconnect),(0,n.b)(this,p).removeListener("message",this.onMessage),(0,n.b)(this,p).removeListener("switchChain",this.onSwitchChain),(0,n.b)(this,p).removeListener("display_uri",this.onDisplayUri),(0,n.b)(this,p).removeListener("call_request_sent",this.onRequestSent))}}}]);